import{r as c,_ as n,u as N,a as V,j as e,c as I,i as v}from"./index-50459877.js";import{G as m}from"./Grid2-a7e2a385.js";import{D as S}from"./DefaultService-bd312886.js";import{r as g}from"./createSvgIcon-bd149968.js";import{G as F}from"./immer-2c847413.js";import{c as ce,i as ue,u as we,M as D}from"./useAppStore-8783148e.js";import{p as ye,c as Me,B as $e}from"./middleware-6fc84b47.js";import{F as H,I as k,S as B,T as z}from"./TextField-87425669.js";import{S as R}from"./Stack-bf48dc68.js";import{g as W,a as O,s as y,c as P,b as A,m as be,B as d}from"./Button-58a50ac9.js";import"./dividerClasses-b16a4eb2.js";function Ce(a){return W("MuiImageList",a)}O("MuiImageList",["root","masonry","quilted","standard","woven"]);const Le=c.createContext({}),de=Le,Se=["children","className","cols","component","rowHeight","gap","style","variant"],Te=a=>{const{classes:t,variant:o}=a;return A({root:["root",o]},Ce,t)},Re=y("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[t.root,t[o.variant]]}})(({ownerState:a})=>n({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},a.variant==="masonry"&&{display:"block"})),Pe=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiImageList"}),{children:i,className:p,cols:w=2,component:j="ul",rowHeight:h="auto",gap:_=4,style:M,variant:r="standard"}=s,u=V(s,Se),f=c.useMemo(()=>({rowHeight:h,gap:_,variant:r}),[h,_,r]);c.useEffect(()=>{},[]);const C=r==="masonry"?n({columnCount:w,columnGap:_},M):n({gridTemplateColumns:`repeat(${w}, 1fr)`,gap:_},M),L=n({},s,{component:j,gap:_,rowHeight:h,variant:r}),$=Te(L);return e.jsx(Re,n({as:j,className:P($.root,$[r],p),ref:o,style:C,ownerState:L},u,{children:e.jsx(de.Provider,{value:f,children:i})}))}),De=Pe;function He(a){return W("MuiImageListItem",a)}const ke=O("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),ee=ke,Be=["children","className","cols","component","rows","style"],ze=a=>{const{classes:t,variant:o}=a;return A({root:["root",o],img:["img"]},He,t)},Ne=y("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[{[`& .${ee.img}`]:t.img},t.root,t[o.variant]]}})(({ownerState:a})=>n({display:"block",position:"relative"},a.variant==="standard"&&{display:"flex",flexDirection:"column"},a.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${ee.img}`]:n({objectFit:"cover",width:"100%",height:"100%",display:"block"},a.variant==="standard"&&{height:"auto",flexGrow:1})})),Ve=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiImageListItem"}),{children:i,className:p,cols:w=1,component:j="li",rows:h=1,style:_}=s,M=V(s,Be),{rowHeight:r="auto",gap:u,variant:f}=c.useContext(de);let C="auto";f==="woven"?C=void 0:r!=="auto"&&(C=r*h+u*(h-1));const L=n({},s,{cols:w,component:j,gap:u,rowHeight:r,rows:h,variant:f}),$=ze(L);return e.jsx(Ne,n({as:j,className:P($.root,$[f],p),ref:o,style:n({height:C,gridColumnEnd:f!=="masonry"?`span ${w}`:void 0,gridRowEnd:f!=="masonry"?`span ${h}`:void 0,marginBottom:f==="masonry"?u:void 0,breakInside:f==="masonry"?"avoid":void 0},_),ownerState:L},M,{children:c.Children.map(i,b=>c.isValidElement(b)?b.type==="img"||be(b,["Image"])?c.cloneElement(b,{className:P($.img,b.props.className)}):b:null)}))}),Fe=Ve;function We(a){return W("MuiImageListItemBar",a)}O("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);const Oe=["actionIcon","actionPosition","className","subtitle","title","position"],Ae=a=>{const{classes:t,position:o,actionIcon:s,actionPosition:i}=a,p={root:["root",`position${I(o)}`],titleWrap:["titleWrap",`titleWrap${I(o)}`,s&&`titleWrapActionPos${I(i)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${I(i)}`]};return A(p,We,t)},qe=y("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[t.root,t[`position${I(o.position)}`]]}})(({theme:a,ownerState:t})=>n({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:a.typography.fontFamily},t.position==="bottom"&&{bottom:0},t.position==="top"&&{top:0},t.position==="below"&&{position:"relative",background:"transparent",alignItems:"normal"})),Ee=y("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[t.titleWrap,t[`titleWrap${I(o.position)}`],o.actionIcon&&t[`titleWrapActionPos${I(o.actionPosition)}`]]}})(({theme:a,ownerState:t})=>n({flexGrow:1,padding:"12px 16px",color:(a.vars||a).palette.common.white,overflow:"hidden"},t.position==="below"&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&t.actionPosition==="left"&&{paddingLeft:0},t.actionIcon&&t.actionPosition==="right"&&{paddingRight:0})),Ge=y("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(a,t)=>t.title})(({theme:a})=>({fontSize:a.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),Ue=y("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(a,t)=>t.subtitle})(({theme:a})=>({fontSize:a.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),Ke=y("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[t.actionIcon,t[`actionIconActionPos${I(o.actionPosition)}`]]}})(({ownerState:a})=>n({},a.actionPosition==="left"&&{order:-1})),Je=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:p="right",className:w,subtitle:j,title:h,position:_="bottom"}=s,M=V(s,Oe),r=n({},s,{position:_,actionPosition:p}),u=Ae(r);return e.jsxs(qe,n({ownerState:r,className:P(u.root,w),ref:o},M,{children:[e.jsxs(Ee,{ownerState:r,className:u.titleWrap,children:[e.jsx(Ge,{className:u.title,children:h}),j?e.jsx(Ue,{className:u.subtitle,children:j}):null]}),i?e.jsx(Ke,{ownerState:r,className:u.actionIcon,children:i}):null]}))}),Ye=Je;async function T(a){return await S.getMaterialListV1MaterialDownGetMaterialListPost(a)}var q={},Qe=v;Object.defineProperty(q,"__esModule",{value:!0});var me=q.default=void 0,Xe=Qe(g()),Ze=e;me=q.default=(0,Xe.default)((0,Ze.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"ClearTwoTone");var E={},et=v;Object.defineProperty(E,"__esModule",{value:!0});var pe=E.default=void 0,tt=et(g()),te=e;pe=E.default=(0,tt.default)([(0,te.jsx)("path",{d:"m19.21 12.04-1.53-.11-.3-1.5C16.88 7.86 14.62 6 12 6 9.94 6 8.08 7.14 7.12 8.96l-.5.95-1.07.11C3.53 10.24 2 11.95 2 14c0 2.21 1.79 4 4 4h13c1.65 0 3-1.35 3-3 0-1.55-1.22-2.86-2.79-2.96M12 17l-4-4h2.55v-3h2.91v3H16z",opacity:".3"},"0"),(0,te.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3m-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"},"1")],"CloudDownloadTwoTone");var G={},at=v;Object.defineProperty(G,"__esModule",{value:!0});var he=G.default=void 0,ot=at(g()),ae=e;he=G.default=(0,ot.default)([(0,ae.jsx)("path",{d:"M9.17 6H4v12h16V8h-8.83z",opacity:".3"},"0"),(0,ae.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V6h5.17l2 2H20zm-2.5-5.88v3.38h-3v-5h1.38zM16.5 9H13v8h6v-5.5z"},"1")],"SnippetFolderTwoTone");const l=ce(ye(ue(()=>({shop_name:"",material_site:"",down_path:"F:\\DOWN",scrapy_url:"",scrapy_num:1,cookie:"",page:1})),{name:"down_store",storage:Me(()=>sessionStorage)})),x=ce(ue(()=>({material_list:[],count:0})));function st(){const a=we(),t=l();function o(){T(t).then(s=>{x.setState(i=>{i.material_list=s.material_list,i.count=s.count})})}return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"选择店铺和下载网站"}),e.jsx(m,{xs:4,children:e.jsxs(H,{children:[e.jsx(k,{children:"店铺选择"}),e.jsx(B,{label:"店铺选择",onChange:s=>{l.setState(i=>{i.shop_name=s.target.value})},value:t.shop_name,name:"shop_name",children:a.shop_name_list.map(s=>e.jsx(D,{value:s,children:s},s))})]})}),e.jsx(m,{xs:4,children:e.jsxs(H,{children:[e.jsx(k,{children:"网站选择"}),e.jsx(B,{name:"material_site",value:t.material_site,label:"网站选择",onChange:s=>{l.setState(i=>{i.material_site=s.target.value})},children:a.material_site_list.map(s=>e.jsx(D,{value:s,children:s},s))})]})}),e.jsx(m,{xs:4,children:e.jsxs(H,{children:[e.jsx(k,{children:"下载地址"}),e.jsx(B,{label:"下载地址",defaultValue:t.down_path,onChange:s=>{l.setState(i=>{i.down_path=s.target.value})},name:"down_path",children:["D","E","F","G","H"].map(s=>e.jsx(D,{value:s+":\\DOWN",defaultChecked:s==="F"&&!0,children:s+":\\DOWN"},s))})]})}),e.jsx(m,{xs:12,children:e.jsxs(R,{direction:"row",spacing:2,children:[e.jsxs(d,{variant:"contained",onClick:o,startIcon:e.jsx(pe,{}),children:["加载素材 ",x().count]}),e.jsx(d,{variant:"contained",onClick:()=>{S.funDownPathMergeV1MaterialDownDownPathMergePost(t)},startIcon:e.jsx(he,{}),children:"文件夹合并"}),e.jsx(d,{onClick:()=>{confirm("确定要删除吗")===!0&&S.clearUnDownMaterialV1MaterialDownClearUnDownMaterialPost(t).then(()=>{o()})},startIcon:e.jsx(me,{}),color:"error",variant:"contained",children:"清空未下载"})]})})]})}var U={},it=v;Object.defineProperty(U,"__esModule",{value:!0});var ve=U.default=void 0,nt=it(g()),rt=e;ve=U.default=(0,nt.default)((0,rt.jsx)("path",{d:"M5.59 7.41 10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPageTwoTone");var K={},lt=v;Object.defineProperty(K,"__esModule",{value:!0});var ge=K.default=void 0,ct=lt(g()),oe=e;ge=K.default=(0,ct.default)([(0,oe.jsx)("path",{d:"M4 18h16V6H4zm7.5-11c2.49 0 4.5 2.01 4.5 4.5 0 .88-.26 1.69-.7 2.39l2.44 2.43-1.42 1.42-2.44-2.44c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7",opacity:".3"},"0"),(0,oe.jsx)("path",{d:"M11.49 16c.88 0 1.7-.26 2.39-.7l2.44 2.44 1.42-1.42-2.44-2.43c.44-.7.7-1.51.7-2.39C16 9.01 13.99 7 11.5 7S7 9.01 7 11.5 9.01 16 11.49 16m.01-7c1.38 0 2.5 1.12 2.5 2.5S12.88 14 11.5 14 9 12.88 9 11.5 10.12 9 11.5 9M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V6h16z"},"1")],"PageviewTwoTone");function ut(){const a=x(),t=l();return e.jsx(e.Fragment,{children:e.jsx(m,{xs:12,children:e.jsx(De,{sx:{width:"100%"},cols:6,gap:24,variant:"standard",children:a.material_list.map((o,s)=>e.jsxs(Fe,{children:[e.jsx("img",{src:t.material_site==="envato"||t.material_site==="freepik"?`https://yumiwudesign.com/api/img_proxy?url=${o.img}`:t.material_site==="包图"?`http://127.0.0.1:8000/v1/img/get_url?img_url=${o.img}`:t.material_site==="享设计"?`${o.img}?x-oss-process=style/prev_w_750_h_auto`:`${o.img}`,style:{objectFit:"contain",background:"#efefef",cursor:"pointer",borderRadius:"6px"},onClick:()=>{window.open("http://127.0.0.1:8000/v1/MaterialDown/get_material_down_link?shop_name="+t.shop_name+"&material_site="+t.material_site+"&material_id="+o._id+"&down_path="+t.down_path),x.setState(i=>{i.material_list.splice(s,1)})}}),e.jsx(Ye,{title:e.jsxs(R,{direction:"row",spacing:1,mt:1,children:[e.jsx(d,{startIcon:e.jsx(ge,{}),onClick:()=>{window.open(o.url)},variant:"contained",color:"inherit",size:"small",children:"查看"}),e.jsx(d,{startIcon:e.jsx(ve,{}),variant:"contained",color:"inherit",size:"small",onClick:()=>{S.cutMaterialListV1MaterialDownCutMaterialListPost({shop_name:t.shop_name,material_site:t.material_site,material_id:o._id}).then(()=>{T(t).then(i=>{x.setState(p=>{p.material_list=i.material_list,p.count=i.count})})})},children:"截止"})]}),subtitle:e.jsxs(R,{mt:2,spacing:1,sx:{textTransform:"uppercase"},children:[e.jsx("div",{className:"",children:o.create_date}),e.jsx("div",{className:"",children:o._id}),e.jsxs("div",{className:"",children:["ID:",s]})]}),position:"below"})]},o._id))})})})}var J={},dt=v;Object.defineProperty(J,"__esModule",{value:!0});var _e=J.default=void 0,mt=dt(g()),se=e;_e=J.default=(0,mt.default)([(0,se.jsx)("path",{d:"M21.51 18H15c-.55 0-1-.45-1-1s.45-1 1-1h1.25v-.25c0-.97.78-1.75 1.75-1.75s1.75.78 1.75 1.75V17h1.76c.28 0 .5.22.5.5-.01.27-.23.5-.5.5",opacity:".3"},"0"),(0,se.jsx)("path",{d:"M21.5 14.98c-.02 0-.03 0-.05.01C21.2 13.3 19.76 12 18 12c-1.4 0-2.6.83-3.16 2.02C13.26 14.1 12 15.4 12 17c0 1.66 1.34 3 3 3l6.5-.02c1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5m.01 3.02H15c-.55 0-1-.45-1-1s.45-1 1-1h1.25v-.25c0-.97.78-1.75 1.75-1.75s1.75.78 1.75 1.75V17h1.76c.28 0 .5.22.5.5-.01.27-.23.5-.5.5M10 4.26v2.09C7.67 7.18 6 9.39 6 12c0 1.77.78 3.34 2 4.44V14h2v6H4v-2h2.73C5.06 16.54 4 14.4 4 12c0-3.73 2.55-6.85 6-7.74M20 6h-2.73c1.43 1.26 2.41 3.01 2.66 5h-2.02c-.23-1.36-.93-2.55-1.91-3.44V10h-2V4h6z"},"1")],"CloudSyncTwoTone");function pt(){const a=l();return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"素材采集面板"}),e.jsx(m,{xs:6,children:e.jsx(z,{label:"采集网址",onChange:t=>{l.setState(o=>{o.scrapy_url=t.target.value})},value:a.scrapy_url,name:"scrapy_url"})}),e.jsx(m,{xs:3,children:e.jsx(z,{label:"采集页面",type:"number",defaultValue:1,onChange:t=>{l.setState(o=>{o.scrapy_num=parseInt(t.target.value)})},value:a.scrapy_num,name:"scrapy_num"})}),e.jsx(m,{xs:3,children:e.jsx(z,{label:"COOKIE",onChange:t=>{l.setState(o=>{o.cookie=t.target.value})},name:"cookie"})}),e.jsx(m,{xs:12,children:e.jsx(d,{variant:"contained",onClick:()=>{S.scrapyMaterialV1MaterialDownScrapyMaterialPost(a).then(()=>{T(a).then(t=>{x.setState(o=>{o.material_list=t.material_list})})})},startIcon:e.jsx(_e,{}),children:"开始采集"})})]})}var Y={},ht=v;Object.defineProperty(Y,"__esModule",{value:!0});var fe=Y.default=void 0,vt=ht(g()),ie=e;fe=Y.default=(0,vt.default)([(0,ie.jsx)("path",{d:"M12 3 2 12h3v8h6v-6h2v6h6v-8h3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5z"},"0"),(0,ie.jsx)("path",{d:"M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z",opacity:".3"},"1")],"HomeTwoTone");var Q={},gt=v;Object.defineProperty(Q,"__esModule",{value:!0});var xe=Q.default=void 0,_t=gt(g()),ne=e;xe=Q.default=(0,_t.default)([(0,ne.jsx)("path",{d:"M17.59 18 19 16.59 14.42 12 19 7.41 17.59 6l-6 6z"},"0"),(0,ne.jsx)("path",{d:"m11 18 1.41-1.41L7.83 12l4.58-4.59L11 6l-6 6z"},"1")],"KeyboardDoubleArrowLeftTwoTone");var X={},ft=v;Object.defineProperty(X,"__esModule",{value:!0});var je=X.default=void 0,xt=ft(g()),re=e;je=X.default=(0,xt.default)([(0,re.jsx)("path",{d:"M6.41 6 5 7.41 9.58 12 5 16.59 6.41 18l6-6z"},"0"),(0,re.jsx)("path",{d:"m13 6-1.41 1.41L16.17 12l-4.58 4.59L13 18l6-6z"},"1")],"KeyboardDoubleArrowRightTwoTone");var Z={},jt=v;Object.defineProperty(Z,"__esModule",{value:!0});var Ie=Z.default=void 0,It=jt(g()),wt=e;Ie=Z.default=(0,It.default)((0,wt.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"}),"HistoryTwoTone");function le(){const a=l();async function t(s){l.setState(i=>{i.page=s})}function o(){T(a).then(s=>{x.setState(i=>{i.material_list=s.material_list,i.count=s.count})})}return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:""}),e.jsx(m,{xs:12,mb:4,children:e.jsxs(R,{direction:"row",spacing:2,children:[e.jsxs($e,{variant:"contained",children:[e.jsx(d,{onClick:()=>{t(1)},disabled:!(a.page>1),startIcon:e.jsx(fe,{}),children:"首页"}),e.jsxs(d,{onClick:()=>{t(a.page-1)},disabled:!(a.page>1),startIcon:e.jsx(xe,{}),children:[a.page>1&&a.page-1," 上一页"]}),e.jsx(d,{children:a.page}),e.jsxs(d,{onClick:()=>{t(a.page+1)},endIcon:e.jsx(je,{}),children:["下一页 ",a.page+1]})]}),e.jsx(d,{variant:"contained",startIcon:e.jsx(Ie,{}),onClick:o,children:"刷新"})]})})]})}function Ht(){const a=l();return c.useEffect(()=>{x.setState(t=>{t.material_list=[]}),a.shop_name!==""&&a.material_site!==""&&T(a).then(t=>{x.setState(o=>{o.material_list=t.material_list,o.count=t.count})})},[a]),c.useEffect(()=>{l.setState(t=>{t.page=1,t.scrapy_url="",t.scrapy_num=1})},[a.shop_name,a.material_site]),e.jsx(e.Fragment,{children:e.jsxs(m,{spacing:3,container:!0,children:[e.jsx(st,{}),e.jsx(pt,{}),e.jsx(le,{}),e.jsx(ut,{}),e.jsx(le,{})]})})}export{Ht as Component};
